<?php
/**
 * @file
 * Code for the Faker module.
 */

/**
 * Implements hook_libraries_info().
 */
function faker_libraries_info() {
  $libraries['faker'] = array(
    'name' => 'Faker',
    'vendor url' => 'https://github.com/fzaninotto/Faker',
    'download url' => 'https://github.com/fzaninotto/Faker/archive/v1.1.0.tar.gz',
    // The actual library files are contained in 'sites/all/libraries/faker/src'
    'path' => 'src',
    'files' => array(
      'php' => array(
        'autoload.php',
      ),
    ),
    'version' => '1.1',
  );

  return $libraries;
}

/**
 * Implements hook_hook_info().
 */
function faker_hook_info() {
  // Allow faker hooks to be defined in modulename.faker.inc.
  $hooks['faker_alter'] = array('group' => 'faker');
  $hooks['faker_node_generate'] = array('group' => 'faker');
}

/**
 * Factory for creating a Faker\Generator instance.  Invokes hook_faker_alter()
 * to allow modules to add providers to the Faker instance.
 */
function faker_create() {
  $lib = libraries_load('faker');

  $faker = Faker\Factory::create();
  drupal_alter('faker', $faker);

  return $faker;
}

/**
 * Implements hook_node_presave().
 */
function nrdc_content_node_presave($node) {
  if (!empty($node->devel_generate)) {
    $faker = faker_create();
    module_invoke_all('faker_node_generate', $node, $faker);
  }
}
